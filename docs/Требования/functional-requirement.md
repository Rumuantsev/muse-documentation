# Функциональные требования

## 1. Авторизация

- **ФТ-1.1** — Система должна предоставлять доступ ко всем ресурсам только авторизированным пользователям.
- **ФТ-1.2** — При прямой попытке перехода на URL любой страницы системы неаутентифицированным пользователем система возвращает ошибку доступа с предложением авторизоваться.
- **ФТ-1.3** — При прямой попытке обращении к любому ресурсу API без валидного токена авторизации система возвращает ошибку доступа.
- **ФТ-1.4** — При авторизации система должна получать идентификатор и роль пользователя из токена авторизации.
- **ФТ-1.5** — Система должна поддерживать распознавание 3 ролей: пользователь, модератор и администратор.

## 2. Создание и управление контентом

### 2.1. Создание вопроса

- **ФТ-2.1.1** — Система должна предоставлять форму для создания вопроса, доступную только авторизованным пользователям.
- **ФТ-2.1.2** — Форма содержит три обязательных поля для заполнения:
  - **Поле "Заголовок":**
    - Однострочное текстовое поле
    - Минимальная длина - 5 символов
    - Максимальная длина - 150 символов
  - **Поле "Описание":**
    - Многострочное текстовое поле
    - Минимальная длина - 20 символов
    - Максимальная длина - 5000 символов
    - Поддержка базового форматирования Markdown (жирный, курсив, код, цитата, списки, изображения)
    - 3 режима отображения: просмотр готового результата, просмотр markdown и просмотр markdown с конечным результатом
  - **Поле "Теги":**
    - Минимальное количество тегов - 1
    - Максимальное количество тегов - 5
    - Теги выбираются из предустановленного списка с поиском
- **ФТ-2.1.3** — Поля формы должны поддерживать валидацию на клиентской части для скорости ответа и на серверной для целостности данных.
  - При незаполнении под соответствующим полем отображается сообщение об ошибке: "Поле обязательно для заполнения"
  - При невалидной длине под соответствующим полем отображается конкретное сообщение об ошибке, например: "Минимальная длина заголовка - 5 символов" или "Максимальная длина описания - 5000 символов"
  - Невалидные поля визуально выделяются красной рамкой

### 2.2. Создание ответа

- **ФТ-2.2.1** — Авторизованный пользователь должен иметь возможность создать ответ на странице конкретного вопроса.
- **ФТ-2.2.2** — Текст ответа вводится в многострочное текстовое поле со следующими параметрами:
  - Минимальная длина - 20 символов
  - Максимальная длина - 5000 символов
  - Поддержка базового форматирования Markdown (жирный, курсив, код, цитата, списки, изображения)
  - 3 режима отображения: просмотр готового результата, просмотр markdown и просмотр markdown с конечным результатом
- **ФТ-2.2.3** — Поле ввода ответа должно поддерживать валидацию в соответствии с ФТ-2.1.3.

### 2.3. Создание комментария

- **ФТ-2.3.1** — Система должна предоставлять авторизованным пользователям возможность оставлять комментарии к вопросам и ответам.
- **ФТ-2.3.2** — Комментарий должен содержать от 1 до 2000 символов текста.
- **ФТ-2.3.3** — Поле ввода комментария должно поддерживать валидацию в соответствии с ФТ-2.1.3.
- **ФТ-2.3.4** — Комментарии должны отображаться в хронологическом порядке (от старого к новому).
- **ФТ-2.3.5** — При большом количестве комментариев система должна предоставлять возможность постраничного отображения.

### 2.4. Редактирование и удаление контента

- **ФТ-2.4.1** — Автор контента (вопросы, ответы, комментарии) должен иметь возможность его редактировать, при этом действуют те же правила и ограничения, что и при создании.
- **ФТ-2.4.2** — При редактировании должны поддерживаться те же правила валидации, что и при создании (ФТ-2.1.3).
- **ФТ-2.4.3** — Система должна сохранять дату последнего редактирования контента.
- **ФТ-2.4.4** — Автор контента должен иметь возможность удалить свой вопрос, ответ или комментарий.
- **ФТ-2.4.5** — Перед удалением должно появляться модальное окно с подтверждением намерения, например “Вы точно хотите удалить вопрос?” и кнопками “Да” и “Нет” для согласия на удаление и отмены удаления, соответственно.
- **ФТ-2.4.6** — Система должна сохранять и отображать дату последнего редактирования контента и автора.

## 3. Поиск, навигация и фильтрация

### 3.1. Просмотр всех вопросов

- **ФТ-3.1.1** — Система должна отображать список всех вопросов.
- **ФТ-3.1.2** — Каждый вопрос в списке должен отображаться с заголовком, кратким описанием, датой создания, тегами, количеством ответов, автором и количеством голосов (Раздел 4).
- **ФТ-3.1.3** — Если вопрос взят из StackOverflow, его автор должен быть помечен иконкой StackOverflow.
- **ФТ-3.1.4** — При просмотре вопросов страница должна поддерживать постраничную выдачу данных с регулировкой количества постов на странице и выбором страницы. Варианты выбора количества: 5, 10, 20, 50.

### 3.2. Поиск

- **ФТ-3.2.1** — Должен быть доступен поиск по ключевым словам (поиск по заголовкам и описаниям вопросов и по ответам).
- **ФТ-3.2.2** — Клиентская часть должна отправлять запросы по мере ввода текста в поисковую строку.
- **ФТ-3.2.3** — Для предотвращения перегрузки сервера на клиентской части должна быть предусмотрена балансировка запросов (debounce/throttle).
- **ФТ-3.2.4** — В поиск можно ввести не больше 1000 символов.
- **ФТ-3.2.5** — Результат поиска может включать в себя как вопросы, так и ответы.
- **ФТ-3.2.6** — В списке постов результата поиска, ответы должны быть подписаны словом “Ответ” для отличия от вопросов.

### 3.3. Сортировка

- **ФТ-3.3.1** — Система должна поддерживать сортировку вопросов по популярности (от самого популярного к менее популярному). Популярность определяется количеством голосов (Раздел 4).
- **ФТ-3.3.2** — Система должна поддерживать сортировку вопросов по новизне (от самого нового к менее новому).
- **ФТ-3.3.3** — При смене типа сортировки система должна автоматически перенаправлять пользователя на первую страницу пагинации.

### 3.4. Метки (Теги)

- **ФТ-3.4.1** — Должна быть реализована отдельная страница с отображением всех меток.
- **ФТ-3.4.2** — На этой же странице должен быть поиск по меткам.
- **ФТ-3.4.3** — При переходе на страницу конкретной метки, должны отобразиться только те вопросы, которые относятся к этой метке.

## 4. Система репутации и вовлечения

### 4.1. Голоса

- **ФТ-4.1.1** — Пользователь должен иметь возможность голосовать «за» или «против» вопросы и ответы, с ограничением один голос на элемент.
- **ФТ-4.1.2** — Система должна отображать пользователю, как именно он проголосовал, и дать возможность отменить голос.
- **ФТ-4.1.3** — Рейтинг вопросов и ответов должен пересчитываться и отображаться в реальном времени без перезагрузки страницы.

### 4.2. Правильный ответ

- **ФТ-4.2.1** — Автор вопроса должен иметь возможность пометить один из ответов как правильный.
- **ФТ-4.2.2** — Остальные пользователи должны видеть, какой ответ был отмечен как правильный.
- **ФТ-4.2.3** — Правильный ответ должен выноситься выше всех остальных.

### 4.3. Неотвеченные вопросы

- **ФТ-4.3.1** — Должна быть реализована отдельная страница с неотвеченными вопросами. Под неотвеченными понимаются те вопросы, которые не имеют ответа, отмеченного автором как правильный.
- **ФТ-4.3.2** — По умолчанию на ней отображаются неотвеченные вопросы только с теми тегами, на которые подписан пользователь (Раздел 5).
- **ФТ-4.3.3** — На странице неотвеченных вопросов должна быть возможность отображения всех неотвеченных вопросов, вне зависимости от их тегов.

## 5. Подписки

- **ФТ-5.1** — Система должна предоставлять авторизованным пользователям возможность подписываться на теги.
- **ФТ-5.2** — Система должна предоставлять пользователю возможность просматривать вопросы, относящиеся только к тем тегам, на которые он подписан.
- **ФТ-5.3** — Система должна предоставлять возможность подписываться на конкретные вопросы.
- **ФТ-5.4** — На серверной части пользователь должен считаться подписанным на все созданные им посты.

## 6. Уведомления

- **ФТ-6.1** — Система должна поддерживать функцию уведомлений пользователя через интерфейс сайта.
- **ФТ-6.2** — Система должна поддерживать функцию уведомлений на почту пользователя.
- **ФТ-6.3** — Система должна уведомлять пользователя о появлении новых вопросов по тегам, на которые он подписан.
- **ФТ-6.4** — Система должна уведомлять пользователя о появлении новых ответов на вопросы, на которые он подписан.
- **ФТ-6.5** — Система должна уведомлять автора вопроса о новых ответах и комментариях к его вопросу.
- **ФТ-6.6** — Система должна уведомлять автора ответа о новых комментариях к его ответу.
- **ФТ-6.7** — Текст уведомления должен разделяться на типы: “Появился новый вопрос с тегом на который вы подписаны!”, “Появился новый ответ на вопрос, на который вы подписаны!” и “Появился новый ответ на ваш вопрос!”.
- **ФТ-6.8** — Пользователь должен иметь возможность отключать все уведомления от системы.

## 7. Ролевая модель

### 7.1. Модератор

- **ФТ-7.1.1** — Модератор должен иметь все права пользователя.
- **ФТ-7.1.2** — Модератор должен иметь возможность редактировать любые вопросы и ответы.
- **ФТ-7.1.3** — Модератор должен иметь возможность удалять вопросы, ответы и комментарии любых пользователей.
- **ФТ-7.1.4** — Модератор должен иметь возможность модерировать теги (добавлять, удалять, редактировать).
- **ФТ-7.1.5** — Модератор должен иметь возможность блокировать пользователей до момента принятия решения о разблокировке.

### 7.2. Администратор

- **ФТ-7.2.1** — Администратор должен иметь все права модератора.
- **ФТ-7.2.2** — Администратор должен иметь возможность управлять ролями пользователей (назначение и откат модераторов).
- **ФТ-7.2.3** — Администратор должен иметь возможность удалять пользователей.

```

```
